"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4722],{8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>r});var s=n(6540);const a={},o=s.createContext(a);function i(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(o.Provider,{value:t},e.children)}},9041:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>l,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"FAQ/How To Set Up HSM Delivery Dashboard","title":"How To Set Up HSM Delivery Dashboard","description":"4 minute read &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Advanced","source":"@site/docs/6. FAQ/How To Set Up HSM Delivery Dashboard.md","sourceDirName":"6. FAQ","slug":"/FAQ/How To Set Up HSM Delivery Dashboard","permalink":"/docs/docs/FAQ/How To Set Up HSM Delivery Dashboard","draft":false,"unlisted":false,"editUrl":"https://github.com/glific/docs/tree/main/docs/6. FAQ/How To Set Up HSM Delivery Dashboard.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Grant access to the Service Account in Google Console","permalink":"/docs/docs/FAQ/Grant access to the Service Account in Google Console"},"next":{"title":"How to add new contacts in bulk","permalink":"/docs/docs/FAQ/How to add new contacts in bulk"}}');var a=n(4848),o=n(8453);const i={},r=void 0,d={},c=[{value:"<strong>4 minute read \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <code>Advanced</code></strong>",id:"4-minute-read-------------------------------------------------------------advanced",level:3},{value:"Problem: How to find the number of contacts who did not get the business initiated message due to frequency capping regulations imposed by Meta on Marketing HSMs.",id:"problem-how-to-find-the-number-of-contacts-who-did-not-get-the-business-initiated-message-due-to-frequency-capping-regulations-imposed-by-meta-on-marketing-hsms",level:3},{value:"Solution: To understand contacts, templates, and campaigns affected (based on dates the broadcast was initaited) by having information of errors that were encountered visialized on a lookerstudio dashboard. This will reduce the effort in repeteadly quering this infomration from the database for every braodcast made, and to make this information easily accessible to the program / operations team to work with.",id:"solution-to-understand-contacts-templates-and-campaigns-affected-based-on-dates-the-broadcast-was-initaited-by-having-information-of-errors-that-were-encountered-visialized-on-a-lookerstudio-dashboard-this-will-reduce-the-effort-in-repeteadly-quering-this-infomration-from-the-database-for-every-braodcast-made-and-to-make-this-information-easily-accessible-to-the-program--operations-team-to-work-with",level:3},{value:"How to set this up",id:"how-to-set-this-up",level:2},{value:"1. Sign into Bigquery using the appropriate email account and select the options to run a query.",id:"1-sign-into-bigquery-using-the-appropriate-email-account-and-select-the-options-to-run-a-query",level:3},{value:"2. Setting up the visualization.",id:"2-setting-up-the-visualization",level:3},{value:"Editing and modifying further",id:"editing-and-modifying-further",level:4}];function h(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h3,{id:"4-minute-read-------------------------------------------------------------advanced",children:(0,a.jsxs)(t.strong,{children:["4 minute read \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,a.jsx)(t.code,{children:"Advanced"})]})}),"\n",(0,a.jsx)(t.h3,{id:"problem-how-to-find-the-number-of-contacts-who-did-not-get-the-business-initiated-message-due-to-frequency-capping-regulations-imposed-by-meta-on-marketing-hsms",children:"Problem: How to find the number of contacts who did not get the business initiated message due to frequency capping regulations imposed by Meta on Marketing HSMs."}),"\n",(0,a.jsx)(t.p,{children:"Context: Meta recently introduced something called as Frequency capping. Explaining in a simple manner, it noticed that users get a lot of Marketing messages from businesses, and to limit SPAM daily, it restricts how many Marketing messages a user can get during a rolling period of X days."}),"\n",(0,a.jsxs)(t.p,{children:["To prevent misuse and gaming the system, they haven\u2019t told us how many messages are allowed in how many days. You can read more about this in their own words ",(0,a.jsx)(t.a,{href:"https://www.gupshup.io/resources/blog/all-you-need-to-know-about-whatsapp-business-api-frequency-capping",children:"here."})]}),"\n",(0,a.jsx)(t.h3,{id:"solution-to-understand-contacts-templates-and-campaigns-affected-based-on-dates-the-broadcast-was-initaited-by-having-information-of-errors-that-were-encountered-visialized-on-a-lookerstudio-dashboard-this-will-reduce-the-effort-in-repeteadly-quering-this-infomration-from-the-database-for-every-braodcast-made-and-to-make-this-information-easily-accessible-to-the-program--operations-team-to-work-with",children:"Solution: To understand contacts, templates, and campaigns affected (based on dates the broadcast was initaited) by having information of errors that were encountered visialized on a lookerstudio dashboard. This will reduce the effort in repeteadly quering this infomration from the database for every braodcast made, and to make this information easily accessible to the program / operations team to work with."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"SELECT\nJSON_EXTRACT_SCALAR(m.errors, '$.app') AS app,\nJSON_EXTRACT_SCALAR(m.errors, '$.payload.destination') AS destination,\nJSON_EXTRACT_SCALAR(m.errors, '$.payload.type') AS type,\nJSON_EXTRACT_SCALAR(m.errors, '$.payload.payload.reason') AS reason,\nDATE(m.sent_at) AS sent_on,\nm.flow_name AS flow_name,\nm.template_uuid AS template_id,\nm.body AS message,\nm.media_url,\nm.is_hsm,\nm.contact_name,\nm.contact_phone\nFROM `project-name.bot-number.messages` AS m\nWHERE m.bsp_status = \"error\"\nGROUP BY\napp, destination, type, reason, sent_on, flow_name, template_id, message, m.media_url, m.is_hsm, m.contact_name, m.contact_phone;\n\n"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"For this query to work for your organization, reaplce the 'projet-name' with the name of your Google Cloud project within which the Big Qusery instance is set up."}),"\n",(0,a.jsx)(t.li,{children:"Replace the 'bot-number' with the chatbot number being used, pre-fixed with the country code."}),"\n"]}),"\n",(0,a.jsx)("img",{width:"528",alt:"Screenshot 2025-05-12 at 2 36 12\u202fPM",src:"https://github.com/user-attachments/assets/66b43618-f49e-4b41-a10f-d69f297fa048"}),"\n",(0,a.jsx)(t.h2,{id:"how-to-set-this-up",children:"How to set this up"}),"\n",(0,a.jsx)(t.h3,{id:"1-sign-into-bigquery-using-the-appropriate-email-account-and-select-the-options-to-run-a-query",children:"1. Sign into Bigquery using the appropriate email account and select the options to run a query."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Navigate to bigquery. Expand the phone number (aka dataset) and select ",(0,a.jsx)(t.code,{children:"Contacts"})," table"]}),"\n"]}),"\n",(0,a.jsx)("img",{width:"304",alt:"Screenshot 2025-05-12 at 2 40 53\u202fPM",src:"https://github.com/user-attachments/assets/429557a7-a146-4841-a337-266fb2c13984"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Click on the \u201cQuery\u2019 button to create an empty query"}),"\n"]}),"\n",(0,a.jsx)("img",{width:"328",alt:"Screenshot 2025-05-12 at 2 41 14\u202fPM",src:"https://github.com/user-attachments/assets/09e72227-7efd-4f1a-a904-14d1c01d2b05"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"You will get an empty query which looks like this"}),"\n"]}),"\n",(0,a.jsx)("img",{width:"504",alt:"Screenshot 2025-05-12 at 2 41 33\u202fPM",src:"https://github.com/user-attachments/assets/bfc7b172-d7c5-487b-8b1b-fa1dd8b542f9"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Copy paste the query above into the query window. Replace the phrase \u201cdataset\u201d with the values from the empty query. Copy everything (projectname.dataset) from the \u2018 symbol till the .(dot) before contacts and paste it in the 2 places it says \u201cdataset\u201d. Delete the empty query so that only what you pasted is visible on the screen."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Hit the \u2018Run\u2019 button. You will see Query Results coming once the query has run"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)("img",{width:"528",alt:"Screenshot 2025-05-12 at 2 42 16\u202fPM",src:"https://github.com/user-attachments/assets/27baafcd-9273-4164-bfb7-2b43ca5983f1"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Click on Save and select \u201cSave View\u201d"}),"\n"]}),"\n",(0,a.jsx)("img",{width:"583",alt:"Screenshot 2025-05-12 at 2 42 42\u202fPM",src:"https://github.com/user-attachments/assets/2ac8f85b-e601-4f51-8aca-f109e177d33f"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"In the popup you see, select the correct values. Name the table \u201cerror_hsm_and_media\u201d"}),"\n"]}),"\n",(0,a.jsx)("img",{width:"1139",alt:"Screenshot 2025-05-12 at 2 43 05\u202fPM",src:"https://github.com/user-attachments/assets/5794adcd-27e4-4b8d-ab03-be96fdedfbc8"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"You will now see a new table/view popping up in the list of tables in the left of the screen"}),"\n"]}),"\n",(0,a.jsx)("img",{width:"282",alt:"Screenshot 2025-05-12 at 2 44 10\u202fPM",src:"https://github.com/user-attachments/assets/57245fbc-bf71-44bb-87fb-b4ff3bb6fe62"}),"\n",(0,a.jsx)(t.p,{children:"Now that the data is formatted as you need it,\nlets move to Part 2"}),"\n",(0,a.jsx)(t.h3,{id:"2-setting-up-the-visualization",children:"2. Setting up the visualization."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Sign in to your Look Studio space using your work google account associated with BigQuery"}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Open this link - ",(0,a.jsx)(t.a,{href:"https://lookerstudio.google.com/u/0/reporting/859eb34f-2f9a-410c-8baa-dacf28af6c33/page/oBhGF/preview",children:"https://lookerstudio.google.com/u/0/reporting/859eb34f-2f9a-410c-8baa-dacf28af6c33/page/oBhGF/preview"})," in your browser"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"In the top right corner, you will see 2 buttons next to your user profile icon"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)("img",{width:"739",alt:"Screenshot 2025-05-12 at 3 09 14\u202fPM",src:"https://github.com/user-attachments/assets/aa6221f3-74a2-4cd5-bba2-65845b9ac64e"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Click on Use my own data"}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Navigate the options, to select your project. Then the data set, and then finally the view we just created. Your dashboard is ready!"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)("img",{width:"997",alt:"Screenshot 2025-05-12 at 3 09 46\u202fPM",src:"https://github.com/user-attachments/assets/93fe93ef-3cff-4b94-b060-10d6ccaebf11"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:'Finish off the steps by clicking "Edit and Share"'}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"This will lead you to the same preview link as shared above."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:'Navigate to the lookerstudio homepage by clicking the top left "Lookerstudio" icon, next to the "HSM and Media Errors" name of the dashboard'}),"\n"]}),"\n"]}),"\n",(0,a.jsx)("img",{width:"1014",alt:"Screenshot 2025-05-22 at 2 02 40\u202fPM",src:"https://github.com/user-attachments/assets/e95c7e2f-c9ae-4492-8e27-24674e765cb2"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"See that a new copy of the dashboard has been created."}),"\n"]}),"\n",(0,a.jsx)("img",{width:"540",alt:"Screenshot 2025-05-22 at 2 03 20\u202fPM",src:"https://github.com/user-attachments/assets/2b44cfe7-67ca-48b6-8247-3577a8a9cb5d"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Go to this copy of the dashboard, go to edit and change the name to include your org's name for future reference."}),"\n"]}),"\n",(0,a.jsx)("img",{width:"1398",alt:"Screenshot 2025-05-22 at 2 03 48\u202fPM",src:"https://github.com/user-attachments/assets/b5a90a42-eb80-478f-9898-921a313c9372"}),"\n",(0,a.jsx)(t.h4,{id:"editing-and-modifying-further",children:"Editing and modifying further"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"To see a list of users and numbers or any other such details, select Edit."}),"\n",(0,a.jsx)(t.li,{children:"Then Select Add a chart. Select a table."}),"\n",(0,a.jsx)(t.li,{children:"Drag and drop the fields contact_name and contact_phone under \u201cDimension\u201d."}),"\n",(0,a.jsx)(t.li,{children:"You can now extract all the affected users when apply the relevant filters by Hovering on the top right corner of the chart,"}),"\n",(0,a.jsx)(t.li,{children:"clicking on \u201cmore\u201d, then Export and selecting the format you prefer!"}),"\n"]})]})}function l(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);