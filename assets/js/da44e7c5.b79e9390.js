"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8052],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=o.createContext({}),p=function(e){var t=o.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(i.Provider,{value:t},e.children)},u="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},k=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),k=a,m=u["".concat(i,".").concat(k)]||u[k]||b[k]||r;return n?o.createElement(m,l(l({ref:t},c),{},{components:n})):o.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=k;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[u]="string"==typeof e?e:a,l[1]=s;for(var p=2;p<r;p++)l[p]=n[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}k.displayName="MDXCreateElement"},7030:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var o=n(7462),a=(n(7294),n(3905));const r={},l=void 0,s={unversionedId:"Product Features/Flows/Flow Actions/Call a webhook",id:"Product Features/Flows/Flow Actions/Call a webhook",title:"Call a webhook",description:"### 3 minute read &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Advanced",source:"@site/docs/3. Product Features/03. Flows/2. Flow Actions/11. Call a webhook.md",sourceDirName:"3. Product Features/03. Flows/2. Flow Actions",slug:"/Product Features/Flows/Flow Actions/Call a webhook",permalink:"/docs/docs/next/Product Features/Flows/Flow Actions/Call a webhook",draft:!1,editUrl:"https://github.com/glific/docs/tree/main/docs/3. Product Features/03. Flows/2. Flow Actions/11. Call a webhook.md",tags:[],version:"current",sidebarPosition:11,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Save a result for this flow",permalink:"/docs/docs/next/Product Features/Flows/Flow Actions/Save a result for this flow"},next:{title:"Link Google Sheets",permalink:"/docs/docs/next/Product Features/Flows/Flow Actions/Link Google Sheets"}},i={},p=[{value:"Using Webhooks in Glific",id:"using-webhooks-in-glific",level:2},{value:"Checking Webhook Logs",id:"checking-webhook-logs",level:2},{value:"Reference Article",id:"reference-article",level:2}],c={toc:p};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("blockquote",null,(0,a.kt)("h3",{parentName:"blockquote",id:"3-minute-read-------------------------------------------------------------advanced"},(0,a.kt)("strong",{parentName:"h3"},"3 minute read ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ","\xa0"," ",(0,a.kt)("inlineCode",{parentName:"strong"},"Advanced"))),(0,a.kt)("hr",{parentName:"blockquote"})),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Webhook calls are used to communicate with third-party applications within flows. They allow NGOs to receive and handle incoming messages, delivery receipts and other events from WhatsApp in a seamless and automated manner.")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"using-webhooks-in-glific"},"Using Webhooks in Glific"),(0,a.kt)("p",null,"Please have a look at the steps to call Webhooks in Glific."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Receive the response from a contact in a variable.")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/32592458/212661318-ed2b2fa8-2f4a-4b6b-a2f3-7c00b8aa36d2.png",alt:"image"})),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Call Webhook in a node.",(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"Choose to ",(0,a.kt)("inlineCode",{parentName:"li"},"Call a webhook")," in the dropdown in node action."),(0,a.kt)("li",{parentName:"ol"},"Choose ",(0,a.kt)("inlineCode",{parentName:"li"},"POST")," in response type."),(0,a.kt)("li",{parentName:"ol"},"Enter the ",(0,a.kt)("inlineCode",{parentName:"li"},"URL")," where you want a Webhook connection."),(0,a.kt)("li",{parentName:"ol"},"Click on the ",(0,a.kt)("inlineCode",{parentName:"li"},"Post Body")," tab."),(0,a.kt)("li",{parentName:"ol"},"Enter the variables which you want to pass through the webhook.")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n  "contact": "@contact",\n  "results": "@results",\n  "Emp_name": "Mohit"\n  "Emp_age": "@results.age.input"\n}\n')),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/32592458/212661350-bf2ce325-4fbf-4882-b947-10f7eb660f3f.png",alt:"image"})),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/32592458/212661387-ebb6e6c4-b675-4a26-ada3-d816f39c1f70.png",alt:"image"})),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"OK")," to save the changes")),(0,a.kt)("hr",null),(0,a.kt)("h1",{id:"use-webhook-response-in-the-flows"},"Use webhook response in the flows"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Let","'","s say you make a webhook call (by using the above steps) and you want to use the response variable in the flow. ")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/32592458/212661423-cdbd967e-d435-48b3-982f-fe59cf08f51a.png",alt:"image"})),(0,a.kt)("p",null,"For example, if you send a response like a below object"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n"success_message" : "You are onboarded.",\n"status_code": 200\n}\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Please note that your webhook should always return a JSON object (not an array). ")),(0,a.kt)("p",null,"Then you can use that response as ",(0,a.kt)("strong",{parentName:"p"},"@results.mywebhook.success_message")," Or if you want to use any other variable then it will be ",(0,a.kt)("strong",{parentName:"p"},"@results.mywebhook.*YOUR_RESPONSE_OBJECT_KEY")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/32592458/212661557-e5e73775-1c71-4ea9-b2f2-81cf809db3ba.png",alt:"image"})),(0,a.kt)("p",null,"Here my webhook is a custom name you defined on your webhook node and ",(0,a.kt)("strong",{parentName:"p"},"success_message"),"  is the key of the response object you send back in a webhook call."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"checking-webhook-logs"},"Checking Webhook Logs"),(0,a.kt)("p",null,"Once the webhook setup is complete. You can test it by executing the flow in Glific. There may a case, the webhook is not set up correctly and there are some errors in Webhook calls."),(0,a.kt)("p",null,"Glific has ",(0,a.kt)("strong",{parentName:"p"},"Webhook Logs")," from where you can check the status of a Webhook call and see if it returned some errors."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Access Flows page from left panel.")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/32592458/212661724-2fbf8308-c643-4b31-8850-a5b141bf2aa8.png",alt:"image"})),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Click on the ",(0,a.kt)("inlineCode",{parentName:"li"},"View webhook logs"),"  link at the bottom of the ",(0,a.kt)("inlineCode",{parentName:"li"},"Flows")," page. ")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/32592458/212661766-a1fee1df-3f8e-4777-9561-283889f750ff.png",alt:"image"})),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Webhook logs page will show the results of your webhook calls with the below details",(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"Time"),"  - Time of the webhook call."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"URL")," - The URL which is used in webhook call."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"Status")," - Success / Error"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"Status Code"),"- Status code returned from the webhook call. "),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"Error")," - Error is an error returned. NULL in the case of success"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"Method")," - GET / POST"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"Request Header")," - Request header of the webhook call"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"Request JSON")," - JSON of the webhook call"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"Response JSON")," - JSON response received from the webhook call."),(0,a.kt)("li",{parentName:"ol"}))),(0,a.kt)("li",{parentName:"ol"},"You can click on the data received in the logs to copy or view the full response.")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/32592458/212661790-0d79be95-c208-4e49-9f4c-5ff56c1b1a65.png",alt:"image"})),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"View")," will open up the response received in a pop-up window. You can check or copy the text to know more details of the response.")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/32592458/212661806-2bdf38df-5791-492e-9c4f-a6c3fc7e919b.png",alt:"image"})),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"reference-article"},"Reference Article"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://glific.github.io/slate/#webhooks"},"Glific Webhooks"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/glific/recipes"},"Code examples to use Webhooks in Glific")))))}u.isMDXComponent=!0}}]);