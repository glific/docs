"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6975],{2705:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Product Features/Flows/Flow Actions/Wait for result","title":"Wait for result","description":"### 1 minute read &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Beginner","source":"@site/docs/4. Product Features/03. Flows/2. Flow Actions/15. Wait for result.md","sourceDirName":"4. Product Features/03. Flows/2. Flow Actions","slug":"/Product Features/Flows/Flow Actions/Wait for result","permalink":"/docs/Product Features/Flows/Flow Actions/Wait for result","draft":false,"unlisted":false,"editUrl":"https://github.com/glific/docs/tree/main/docs/4. Product Features/03. Flows/2. Flow Actions/15. Wait for result.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Start somebody else in a flow","permalink":"/docs/Product Features/Flows/Flow Actions/Start somebody else in a flow"},"next":{"title":"Open a ticket with a human agent","permalink":"/docs/Product Features/Flows/Flow Actions/Open a ticket with a human agent"}}');var o=n(4848),i=n(8453);const l={},r=void 0,a={},c=[{value:"<strong>1 minute read \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <code>Beginner</code></strong>",id:"1-minute-read-------------------------------------------------------------beginner",level:3},{value:"\u201cWait for Result\u201d Node",id:"wait-for-result-node",level:2},{value:"Introduction",id:"introduction",level:3},{value:"Using the Wait for Results Node",id:"using-the-wait-for-results-node",level:3},{value:"Example Flow",id:"example-flow",level:3},{value:"Sending and Saving the flow results",id:"sending-and-saving-the-flow-results",level:2},{value:"References",id:"references",level:3}];function d(e){const s={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.h3,{id:"1-minute-read-------------------------------------------------------------beginner",children:(0,o.jsxs)(s.strong,{children:["1 minute read \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,o.jsx)(s.code,{children:"Beginner"})]})}),"\n"]}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h2,{id:"wait-for-result-node",children:"\u201cWait for Result\u201d Node"}),"\n",(0,o.jsx)(s.p,{children:"Handle webhooks that take longer time to execute via the wait for result node."}),"\n",(0,o.jsx)(s.h3,{id:"introduction",children:"Introduction"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"Webhooks"})," are a common way of integrating different systems and automating workflows."]}),"\n",(0,o.jsx)(s.p,{children:"However, some webhook calls may take longer to execute than others, and the default timeout for a webhook call (5 sec) in a flow may not be sufficient."}),"\n",(0,o.jsxs)(s.p,{children:["In such cases, it is necessary to use a different approach to handle longer ",(0,o.jsx)(s.code,{children:"webhook calls"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["To address this issue, we have created a new node called ",(0,o.jsx)(s.code,{children:"Wait for Results"})," that allows you to pause a flow until a longer webhook call is completed at your side (Not Glific)."]}),"\n",(0,o.jsxs)(s.p,{children:["This document explains how to use the ",(0,o.jsx)(s.strong,{children:"Wait for Results"})," node in your flows and provides steps for implementing it."]}),"\n",(0,o.jsx)(s.h3,{id:"using-the-wait-for-results-node",children:"Using the Wait for Results Node"}),"\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.strong,{children:"Wait for Results"})," node allows you to pause a flow until a longer webhook call is completed."]}),"\n",(0,o.jsxs)(s.p,{children:["When you define this node in your flow, the flow will pause at that node for the amount of time we set(minimum of 1 min to maximum upto days), and once the ",(0,o.jsx)(s.a,{href:"https://api.glific.com/#89f5f6e6-9bdc-48c2-96c5-ad8c1f7a834b",children:"Resume Flow API"})," call is made, the flow will resume for the same contact."]}),"\n",(0,o.jsx)(s.p,{children:"You can use this action for multiple purposes, but a longer webhook is a common use case."}),"\n",(0,o.jsx)("img",{width:"501",alt:"image",src:"https://github.com/user-attachments/assets/dde19cf2-7675-4b79-8fe4-c6a7509295da"}),"\n",(0,o.jsx)(s.h3,{id:"example-flow",children:"Example Flow"}),"\n",(0,o.jsxs)(s.p,{children:["Here is an example flow that uses the ",(0,o.jsx)(s.strong,{children:"Wait for Results"})," node to handle a longer webhook call."]}),"\n",(0,o.jsxs)(s.p,{children:["We have added a time of ",(0,o.jsx)(s.code,{children:"15 mins"})," for the flow to pause while the long webhook call is completed."]}),"\n",(0,o.jsxs)(s.p,{children:["But if the webhook call gets completed before ",(0,o.jsx)(s.code,{children:"15 mins"}),", then the flow will resume."]}),"\n",(0,o.jsx)("img",{width:"501",alt:"image",src:"https://github.com/user-attachments/assets/30330d7d-2ba1-46c7-aa19-d95bf9165579"}),"\n",(0,o.jsxs)(s.p,{children:["In the above flow, the webhook with url ",(0,o.jsx)(s.a,{href:"https://longwebhook.com",children:"https://longwebhook.com"})," might be a task that have to do multiple tasks probably and take a few mins."]}),"\n",(0,o.jsxs)(s.p,{children:["So here orgs can instantly return a ",(0,o.jsx)(s.code,{children:"200"})," so that the flow will move to ",(0,o.jsx)(s.strong,{children:"Wait for result"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["Once the flow is in ",(0,o.jsx)(s.strong,{children:"Wait for result"})," it will wait for ",(0,o.jsx)(s.code,{children:"15 mins"})," as we declared above."]}),"\n",(0,o.jsxs)(s.p,{children:["Now once the required tasks are done from org\u2019s backend (for ex querying from RAG model), they can hit Glific\u2019s ",(0,o.jsx)(s.a,{href:"https://api.glific.com/#89f5f6e6-9bdc-48c2-96c5-ad8c1f7a834b",children:"Resume flow for a contact"})," from their backend with the flowId, contactId and the results we need to send back to the flow, so that we can use those in the subsequent nodes as shown in the fourth and last node in the above flow."]}),"\n",(0,o.jsx)("img",{width:"501",alt:"image",src:"https://github.com/user-attachments/assets/d8e6b0b5-3506-42fc-abd2-7fca1d3caf30"}),"\n",(0,o.jsx)(s.h2,{id:"sending-and-saving-the-flow-results",children:"Sending and Saving the flow results"}),"\n",(0,o.jsxs)(s.p,{children:["In our flow, the webhook node results are stored in the ",(0,o.jsx)(s.code,{children:"result"})," variable as shown in the second node of the flow."]}),"\n",(0,o.jsxs)(s.p,{children:["So we have to send the results inside a ",(0,o.jsx)(s.code,{children:"result"})," key from the api too as shown in the above postman snippet."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"NOTE:"})," The value of ",(0,o.jsx)(s.code,{children:"result"})," param in the api should be a valid stringified json like"]}),"\n",(0,o.jsx)("img",{width:"504",alt:"image",src:"https://github.com/user-attachments/assets/bf1d167f-b18b-46f3-afd4-77a0031d2f7e"}),"\n",(0,o.jsx)(s.h3,{id:"references",children:"References"}),"\n",(0,o.jsx)(s.p,{children:"Prerequisites needed for using resume flow api."}),"\n",(0,o.jsxs)(s.p,{children:['Api url would be "',(0,o.jsx)(s.a,{href:"https://api.shortcode.glific.com/",children:"https://api.shortcode.glific.com/"})," where shortcode is your glific subdomain,\nfor ex ",(0,o.jsx)(s.a,{href:"https://api.xxxxxx.glific.com/",children:"https://api.xxxxxx.glific.com/"}),'".']}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Use ",(0,o.jsx)(s.a,{href:"https://api.glific.com/#4a9a72a5-01d3-4af4-a7e0-7b50a67c6dac",children:"login api"})," to get the auth token for using other apis like resume flow api."]}),"\n",(0,o.jsxs)(s.li,{children:["Use ",(0,o.jsx)(s.a,{href:"https://api.glific.com/#e0f1066e-471b-47de-b83d-0003387e9032",children:"get all flows"})," api with either name or uuid of the flow as filter for\nfetching the ",(0,o.jsx)(s.code,{children:"Flow Id"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Use ",(0,o.jsx)(s.a,{href:"https://api.glific.com/#42b55eb3-e58e-488f-bc55-7f2510d81ce3",children:"contacts apis"})," for fetching the contactId"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>r});var t=n(6540);const o={},i=t.createContext(o);function l(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);