"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7524],{8554:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>r,toc:()=>h});var t=s(4848),a=s(8453);const i={},o=void 0,r={id:"FAQ/AI Assistants To Send Files As Attachments",title:"AI Assistants To Send Files As Attachments",description:"### 4 minute read &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Advanced",source:"@site/docs/6. FAQ/AI Assistants To Send Files As Attachments.md",sourceDirName:"6. FAQ",slug:"/FAQ/AI Assistants To Send Files As Attachments",permalink:"/docs/docs/FAQ/AI Assistants To Send Files As Attachments",draft:!1,unlisted:!1,editUrl:"https://github.com/glific/docs/tree/main/docs/6. FAQ/AI Assistants To Send Files As Attachments.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Get Glific Support",permalink:"/docs/docs/FAQ/Get Glific Support"},next:{title:"Clear Flows: Resetting Contact Variables for Testing",permalink:"/docs/docs/FAQ/Clear Flows: Resetting Contact Variables for Testing"}},l={},h=[{value:"<strong>4 minute read \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <code>Advanced</code></strong>",id:"4-minute-read-------------------------------------------------------------advanced",level:3},{value:"AI assistants to send files as attachment.",id:"ai-assistants-to-send-files-as-attachment",level:2},{value:"Summary",id:"summary",level:3},{value:"Premise",id:"premise",level:3},{value:"The Use Case",id:"the-use-case",level:3},{value:"Example Use Case",id:"example-use-case",level:3},{value:"Delivering files as a link in the message:",id:"delivering-files-as-a-link-in-the-message",level:2},{value:"Delivering the file as an attachment (a file sent over whatsapp)",id:"delivering-the-file-as-an-attachment-a-file-sent-over-whatsapp",level:2},{value:"Credits",id:"credits",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.h3,{id:"4-minute-read-------------------------------------------------------------advanced",children:(0,t.jsxs)(n.strong,{children:["4 minute read \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,t.jsx)(n.code,{children:"Advanced"})]})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"ai-assistants-to-send-files-as-attachment",children:"AI assistants to send files as attachment."}),"\n",(0,t.jsx)(n.h3,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"The blog captures steps to enable AI assistants in Glific to send links to the files along with the text which captures the answer/ response to a question by a contact. The trick lies in providing the files search assistant with: (a) appropriately structured knowledge base, (b) an simple and structured prompt with examples output expected."}),"\n",(0,t.jsx)(n.h3,{id:"premise",children:"Premise"}),"\n",(0,t.jsx)(n.p,{children:"Before you proceed ahead, read here to get the basic understanding of how to use filesearch assistants in Glific."}),"\n",(0,t.jsx)(n.h3,{id:"the-use-case",children:"The Use Case"}),"\n",(0,t.jsx)(n.p,{children:"For orgs that have PDFs or any other files containing specific information, who want to accomplish the following:\nDeliver the answer from the information: This is a simple file search implementation, where all the files are added as the knowledge base in text/pdf form for an assistant to then generate answers from.\nBut also, deliver the files where the information retrieved by LLM resides: this is a filesearch implementation where a separate assistant can be created which has been given only the links to the files along with some description on what the file contains."}),"\n",(0,t.jsx)(n.p,{children:"The blog details how to accomplish point 2 explained above."}),"\n",(0,t.jsx)(n.p,{children:"This can be done in two ways."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Delivering the file as a link in the message"}),"\n",(0,t.jsx)(n.li,{children:"Delivering the file as an attachment (a file sent over whatsapp)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-use-case",children:"Example Use Case"}),"\n",(0,t.jsx)(n.p,{children:"Leadership for Equity has a large repository of compartmentalized lesson plans in form of PDF files. Based on the subject, grade and lesson plan number as selected or determined earlier in the conversation, a teacher needs to be supported either by answering questions about the lesson plan and/or providing the lesson plan PDF itself."}),"\n",(0,t.jsx)(n.h2,{id:"delivering-files-as-a-link-in-the-message",children:"Delivering files as a link in the message:"}),"\n",(0,t.jsx)("img",{width:"467",alt:"Screenshot 2025-03-05 at 5 17 03\u202fPM",src:"https://github.com/user-attachments/assets/0cda9835-1364-4513-8aad-842f206de5f9"}),"\n",(0,t.jsx)(n.p,{children:"Screenshot of an response which shares the link to the file in the message itself."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Steps"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Curate the knowledge base in such a way that link to the files are part of the knowledge base document and also which there is a brief description provided as to what kind of information the file actually contains."}),"\n"]}),"\n",(0,t.jsx)("img",{width:"393",alt:"Screenshot 2025-03-05 at 5 18 33\u202fPM",src:"https://github.com/user-attachments/assets/39e87206-dd79-4f06-a231-61f7f1289c2e"}),"\n",(0,t.jsx)(n.p,{children:"Screenshot from the knowledge base file, showing the title and the link to the file for the LLM."}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Ensure the files added in the knowledge base are universally accessible."}),"\n",(0,t.jsx)(n.li,{children:"Write the prompt and include a few examples of how the answer should be generated and structured."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"PROMPT (curtsey Leadership for Eqquity)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'You\'re a chatbot who is an empathetic responder to queries of teachers, teacher mentors and officials engaged with NGO called Leadership for Equity. Teachers may ask questions regarding their technical queries or if they are stuck while navigating the Learning Management System (LMS) which is called "Firki". The teachers who ask you questions will need responses in the simplest language possible and in maximum 5-7lines\n\nInstructions for you to respond to a question\n\n1. DO NOT SHARE anything that is not there in the knowledge base. If you cannot find the answer in the given text, politely respond by saying \u201cI do not have enough information to answer your question\u201d \n\n2. Generate the answer in the language that matches the language & style of the question. For example, if they asked question in Hindi typed in English, answer back in Hindi typed in English only\n\n3. If you get emojis/ generic greeting/ acknowledgment messages in any language(like yes, thank you, ok, ji, G, hi, bye, theek hai), respond according to their message.\n\n4. Give responses in bullet points.\n\n5.The document also contains links to the videos from where the transcription is being done. Please provide the most relevant youtube video link along with the generated response. \n\n6. DO NOT HALLUCINATE the video link. Share only the links that are present in the document.\n'})}),"\n",(0,t.jsx)(n.p,{children:"This is the simplest and the fastest way to deliver files, if there is a large number of files involved, and they are already stored in a shared drive. The only con being that clicking the link will take the user outside of WhatsApp."}),"\n",(0,t.jsx)(n.h2,{id:"delivering-the-file-as-an-attachment-a-file-sent-over-whatsapp",children:"Delivering the file as an attachment (a file sent over whatsapp)"}),"\n",(0,t.jsx)("img",{width:"679",alt:"Screenshot 2025-03-05 at 5 19 53\u202fPM",src:"https://github.com/user-attachments/assets/07e851e3-8ab1-4a66-953e-c37731aecd5d"}),"\n",(0,t.jsx)(n.p,{children:"Screenshot showing the file delivered as an attachment."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Curate the knowledge base which has the required headings, structure as well as links to all the Google Cloud Storage URLs"}),"\n",(0,t.jsx)(n.li,{children:"The main point here is to have the description of content in the given file."}),"\n",(0,t.jsx)(n.li,{children:"A simple google sheet format can be done to first collate all the file urls and information of what is contained with in the files, or a simple doc with the relevant details in a structured way."}),"\n",(0,t.jsx)(n.li,{children:"This can be provided to chatGPT to convert into a JSON format."}),"\n",(0,t.jsx)(n.li,{children:"This JSON output which contains the GCS urls should be downloaded or can be saved in a doc."}),"\n",(0,t.jsx)(n.li,{children:"Use this as the knolwedge base."}),"\n"]}),"\n",(0,t.jsx)("img",{width:"514",alt:"Screenshot 2025-03-05 at 5 20 27\u202fPM",src:"https://github.com/user-attachments/assets/c633fed5-5929-46dc-a2fe-aeb1c3e801bf"}),"\n",(0,t.jsx)(n.p,{children:"Screenshot of how the GCS urls can be structured as a knowledge base."}),"\n",(0,t.jsxs)(n.ol,{start:"7",children:["\n",(0,t.jsx)(n.li,{children:"Provide the context in a well structured prompt which instructs the assistant to only generate file urls as the response. Give it a few examples. (an example prompt shown below)"}),"\n",(0,t.jsx)(n.li,{children:"In the flow, add a validation to check of the response from the assistant is a file by using split by result like shown in the flow."}),"\n"]}),"\n",(0,t.jsx)("img",{width:"655",alt:"Screenshot 2025-03-05 at 5 20 58\u202fPM",src:"https://github.com/user-attachments/assets/074bb485-2661-4904-8fa3-b6c5a4815da3"}),"\n",(0,t.jsx)(n.p,{children:"Screenshot explaining how a Glific flow can be structured to ensure that the file generated are validated before being sent as attachments."}),"\n",(0,t.jsx)(n.p,{children:"Screenshot of how flow or contact variables like subject, grade, week, day can be passed as an additional parameters to the assistant"}),"\n",(0,t.jsx)(n.p,{children:"Send it as an attachment by using the \u201cexpression\u201d option in the attachments section."}),"\n",(0,t.jsx)(n.p,{children:"Screenshot showing how to use webhook response to send the file as an attachment."}),"\n",(0,t.jsx)(n.p,{children:"PROMPT:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'You are an AI assistant with access to a structured knowledge base of lesson plan links for different grades and weeks and days. Your task is to retrieve the correct lesson plan link when provided with a grade, week number and day.\n\nUse the JSON/ tabular data as your sole source of truth and do not generate or guess links that are not explicitly available in the knowledge base.\n\nInstructions:\n1. Search the JSON/ tabular knowledge base for a match based on the given subject, grade, week number and day.\n2. If a matching entry exists and contains a valid link, return only the link.\n3. If the entry exists but the link is missing (null or empty), respond with:\n"Lesson plan link not available for the given grade and week."\n4. If no matching entry is found, respond with:\n"No lesson plan found for the given grade and week."\n5. Do not attempt to create or fabricate links under any circumstances.\n\nExample Inputs & Outputs:\nInput: Subject: Literacy, Grade: 1, Week: 9, Day: 1 \nOutput: https://storage.googleapis.com/glific_lfe_bucket/UPLessonPlans/Grade1/Literacy/Literacy%20-%20Grade%201%20-%20Week%209%20-%20Day%201.pdf\n\nInput:  Subject: Math, Grade: 2, Week: 3, Day: 2\nOutput: "Lesson plan link not available for the given grade and week."\n\nInput:  Subject: Math, Grade: 2, Week: 3, Day: 2 (Assume this link does not exist in the knowledge base)\nOutput: "No lesson plan found for the given grade and week."\n\nReturn only the valid link or the specified error message\u2014no additional text or assumptions\n'})}),"\n",(0,t.jsx)(n.h2,{id:"credits",children:"Credits"}),"\n",(0,t.jsx)(n.p,{children:"The above flows and screenshots taken from chatbot developed in collaboration with Leadership for Equity."})]})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>r});var t=s(6540);const a={},i=t.createContext(a);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);